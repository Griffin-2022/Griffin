do 'declare c int = 0;
begin
  while (select count(*) from pg_stat_activity where pid = '
    '72815'
  ') > 0 loop c := c + 1; perform pg_stat_clear_snapshot(); end loop;
  raise log ''test_extensions looped % times'', c;
end';
;SELECT e.extname, e.oid
FROM pg_catalog.pg_extension e
WHERE e.extname OPERATOR(pg_catalog.~) '^(test_ext8)$' COLLATE pg_catalog.default
ORDER BY 1;
;SELECT pg_catalog.pg_describe_object(classid, objid, 0) AS "Object description"
FROM pg_catalog.pg_depend
WHERE refclassid = 'pg_catalog.pg_extension'::pg_catalog.regclass AND refobjid = '16435' AND deptype = 'e'
ORDER BY 1;
;drop extension test_ext8;
;SET client_min_messages TO 'warning';
;CREATE TEMP TABLE test_ext4_tab ();
;CREATE OR REPLACE FUNCTION create_extension_with_temp_schema()
  RETURNS VOID AS $$
  DECLARE
    tmpschema text;
    query text;
  BEGIN
    SELECT INTO tmpschema pg_my_temp_schema()::regnamespace;
    query := 'CREATE EXTENSION test_ext4 SCHEMA ' || tmpschema || ' CASCADE;';
    RAISE NOTICE 'query %', query;
    EXECUTE query;
  END; $$ LANGUAGE plpgsql;
;BEGIN;
;SELECT create_extension_with_temp_schema();
;PREPARE TRANSACTION 'twophase_extension';
;DROP TABLE test_ext4_tab;
;DROP FUNCTION create_extension_with_temp_schema();
;RESET client_min_messages;
;CREATE EXTENSION test_ext_evttrig;
;ALTER EXTENSION test_ext_evttrig UPDATE TO '2.0';
;DROP EXTENSION test_ext_evttrig;
;