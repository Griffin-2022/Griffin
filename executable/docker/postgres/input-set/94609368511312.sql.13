CREATE ROLE regress_readallstats;
;SELECT has_table_privilege('regress_readallstats','pg_backend_memory_contexts','SELECT');
;SELECT has_table_privilege('regress_readallstats','pg_shmem_allocations','SELECT');
;GRANT pg_read_all_stats TO regress_readallstats;
;SELECT has_table_privilege('regress_readallstats','pg_backend_memory_contexts','SELECT');
;SELECT has_table_privilege('regress_readallstats','pg_shmem_allocations','SELECT');
;SET ROLE regress_readallstats;
;SELECT COUNT(*) >= 0 AS ok FROM pg_backend_memory_contexts;
;SELECT COUNT(*) >= 0 AS ok FROM pg_shmem_allocations;
;RESET ROLE;
;DROP ROLE regress_readallstats;
;