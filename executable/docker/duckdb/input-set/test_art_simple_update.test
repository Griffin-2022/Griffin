# name: test/sql/index/art/test_art_simple_update.test
# description: Test ART index with simple updates
# group: [art]

;
CREATE TABLE integers(i INTEGER)

;
CREATE INDEX i_index ON integers using art(i)

;
INSERT INTO integers VALUES (1)

;
BEGIN TRANSACTION

;
UPDATE integers SET i=10 WHERE i=1

# con sees the new state
;
SELECT * FROM integers WHERE i < 5
;

;
SELECT * FROM integers WHERE i > 0
;
10

# con2 sees the old state
;
SELECT * FROM integers WHERE i < 5
;
1

;
SELECT * FROM integers WHERE i > 0
;
1

;
ROLLBACK

