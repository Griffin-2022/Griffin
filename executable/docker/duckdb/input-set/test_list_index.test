# name: test/sql/types/nested/list/test_list_index.test
# description: Test accessing list elements using a list
# group: [list]

;
PRAGMA enable_verification

;
SELECT a[1] FROM (VALUES (LIST_VALUE())) tbl(a)
;
NULL

;
SELECT a[1] FROM (VALUES (LIST_VALUE(NULL))) tbl(a)
;
NULL

;
SELECT a[-1] FROM (VALUES (LIST_VALUE(NULL))) tbl(a)
;
NULL

;
SELECT a[NULL] FROM (VALUES (LIST_VALUE(42))) tbl(a)
;
NULL

;
SELECT a[1] FROM (VALUES (LIST_VALUE(42))) tbl(a)
;
42

;
SELECT a[1+1-1] FROM (VALUES (LIST_VALUE(42))) tbl(a)
;
42

;
SELECT a[b] FROM (VALUES (LIST_VALUE(42), 1)) tbl(a, b)
;
42

# doing it directly on the function does not require brackets
;
SELECT (LIST_VALUE(42))[1]
;
42

;
SELECT LIST_VALUE(42)[1]
;
42

# slicing
;
SELECT a[2:] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[43, 44]

;
SELECT a[1:] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[42, 43, 44]

;
SELECT a[:1] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[42]

;
SELECT a[0:1] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[42]

;
SELECT a[0:-1] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[42, 43]

;
SELECT a[-3:-1] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[42, 43]

;
SELECT a[-5:] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
NULL

;
SELECT a[:5] FROM (VALUES (LIST_VALUE(42, 43, 44))) tbl(a)
;
[42, 43, 44]
