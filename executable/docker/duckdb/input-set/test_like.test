# name: test/sql/function/string/test_like.test
# description: Test LIKE statement
# group: [string]

;
PRAGMA enable_verification

# scalar like
;
SELECT 'aaa' LIKE 'bbb'
;
0

;
SELECT 'aaa' LIKE 'abab'
;
0

;
SELECT 'aaa' LIKE 'aaa'
;
1

;
SELECT 'aaa' LIKE '%'
;
1

;
SELECT 'aaa' LIKE '%a'
;
1

;
SELECT 'aaa' LIKE '%b'
;
0

;
SELECT 'aaa' LIKE 'a%'
;
1

;
SELECT 'aaa' LIKE 'b%'
;
0

;
SELECT 'aaa' LIKE 'a_a'
;
1

;
SELECT 'aaa' LIKE 'a_'
;
0

;
SELECT 'aaa' LIKE '__%'
;
1

;
SELECT 'aaa' LIKE '____%'
;
0

;
SELECT 'ababac' LIKE '%abac'
;
1

;
SELECT 'ababac' LIKE '%%%abac'
;
1

;
SELECT 'ababac' LIKE 'abab%%%%%'
;
1

;
SELECT 'ababac' LIKE '%%%a%%%b%%a%b%%%%%a%c%%'
;
1

;
SELECT 'ababac' LIKE '%%%a%%%b%%a%b%%%%%a%d%%'
;
0

;
SELECT 'ababac' NOT LIKE '%abac'
;
0

;
SELECT 'aabbccc' LIKE '%aa%bb%cc'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE ''
;
0

;
SELECT 'zebra elephant tiger horse' LIKE '%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra'
;
0

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra elephant tiger horse'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra elephant tiger horse%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE '%zebra elephant tiger horse%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE '%zebra elephant tiger horse blabla'
;
0

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra elephant tiger horse blabla%'
;
0

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE '%horse'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra%elephant%horse'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra%elephant%tiger%horse'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE '%zebra%elephant%tiger%horse'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra%elephant%tiger%horse%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE '%zebra%elephant%tiger%horse%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE '%%zebra %%%ele%phan%t t%ig%er% horse%'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra%tiger%horse'
;
1

;
SELECT 'zebra elephant tiger horse' LIKE 'zebra%tiger%elephant%horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE ''
;
1

;
SELECT 'zebra elephant tiger horse' NOT LIKE '%'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra'
;
1

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra elephant tiger horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra%'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE '%horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra%elephant%horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra%elephant%tiger%horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE '%zebra%elephant%tiger%horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra%elephant%tiger%horse%'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE '%zebra%elephant%tiger%horse%'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE '%%zebra %%%ele%phan%t t%ig%er% horse%'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra%tiger%horse'
;
0

;
SELECT 'zebra elephant tiger horse' NOT LIKE 'zebra%tiger%elephant%horse'
;
1

# like with table
;
CREATE TABLE strings(s STRING, pat STRING);

;
INSERT INTO strings VALUES ('abab', 'ab%'), ('aaa', 'a_a'), ('aaa', '%b%')

;
SELECT s FROM strings WHERE s LIKE 'ab%'
;
abab

;
SELECT s FROM strings WHERE 'aba' LIKE pat
;
abab
aaa
aaa

;
SELECT s FROM strings WHERE s LIKE pat
;
abab
aaa

