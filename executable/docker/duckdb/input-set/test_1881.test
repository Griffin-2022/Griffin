# name: test/issues/general/test_1881.test
# description: Issue 1881: Segmentation fault, pandas UPDATE with JOIN
# group: [general]

;
PRAGMA enable_verification

# with random values (original)
;
create table foo as select (random() * 1000)::int a from range(100000);

;
create table bar as select (random() * 1000)::int a, (random() * 1000)::int b from range(10000);

;
ALTER TABLE foo ADD b INTEGER;

;
UPDATE foo SET b = "bar"."b" FROM "bar" WHERE bar.a = foo.a;

;
drop table foo

;
drop table bar

# fixed values
;
create table foo as select * from range(0, 513) tbl(a);

;
create table bar as select a, 1 b from range(0, 513) tbl(a)

;
ALTER TABLE foo ADD b INTEGER;

;
UPDATE foo SET b = "bar"."b" FROM "bar" WHERE bar.a = foo.a;
