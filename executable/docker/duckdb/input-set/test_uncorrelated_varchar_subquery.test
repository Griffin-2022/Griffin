# name: test/sql/subquery/scalar/test_uncorrelated_varchar_subquery.test
# description: Test uncorrelated VARCHAR subqueries
# group: [scalar]

;
PRAGMA enable_verification

;
CREATE TABLE integers(i INTEGER)

;
INSERT INTO integers VALUES (1), (2), (3), (NULL)

# varchar tests
;
CREATE TABLE strings(v VARCHAR)

;
INSERT INTO strings VALUES ('hello'), ('world'), (NULL)

# ANY
;
SELECT NULL IN (SELECT * FROM strings)
;
NULL

;
SELECT 'hello' IN (SELECT * FROM strings)
;
1

;
SELECT 'bla' IN (SELECT * FROM strings)
;
NULL

;
SELECT 'bla' IN (SELECT * FROM strings WHERE v IS NOT NULL)
;
0

# EXISTS
;
SELECT * FROM strings WHERE EXISTS(SELECT NULL)
;
hello
world
NULL

;
SELECT * FROM strings WHERE EXISTS(SELECT v FROM strings WHERE v='bla')
;

# scalar query
;
SELECT (SELECT v FROM strings WHERE v='hello') FROM strings
;
hello
hello
hello

;
SELECT (SELECT v FROM strings WHERE v='bla') FROM strings
;
NULL
NULL
NULL

