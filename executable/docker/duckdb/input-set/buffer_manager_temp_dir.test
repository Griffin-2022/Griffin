# name: test/sql/storage/buffer_manager_temp_dir.test
# description: Test setting of the temporary directory
# group: [storage]

# set temporary directory to an empty directory
;
PRAGMA temp_directory=''

;
PRAGMA memory_limit='1MB'

# we can't offload anything to disk now
# hence this creation should fail as the table does not fit within our memory limit
;
CREATE TABLE t2 AS SELECT * FROM range(1000000);

# after we set the temp directory, we can create this table
;
PRAGMA temp_directory='__TEST_DIR__/myfile.tmp'

;
CREATE TABLE t2 AS SELECT * FROM range(1000000);

# after the temp directory is created, we can't change the temp directory again
;
PRAGMA temp_directory=''
