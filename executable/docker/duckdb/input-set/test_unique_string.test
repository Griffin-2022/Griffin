# name: test/sql/constraints/unique/test_unique_string.test
# description: UNIQUE constraint on temporary tables with Strings
# group: [unique]

;
CREATE TEMPORARY TABLE integers(i INTEGER, j VARCHAR)

;
CREATE UNIQUE INDEX "uidx" ON "integers" ("j")

;
INSERT INTO integers VALUES (3, '4'), (2, '5')

;
SELECT * FROM integers
;
3	4
2	5

;
INSERT INTO integers VALUES (6, '6'), (3, '4');

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
UPDATE integers SET j='77' WHERE j IS NULL

;
SELECT * FROM integers ORDER BY i, j
;
2	5
3	4
6	NULL
7	NULL

;
UPDATE integers SET j='7777777777777777777777777777' WHERE j IS NULL AND i=6

# we can insert a bunch of null values
;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES (6,NULL), (7,NULL)

;
INSERT INTO integers VALUES  (3, '4')

;
INSERT INTO integers VALUES  (3, '4')

;
DROP TABLE integers

