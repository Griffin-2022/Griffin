# name: test/issues/rigger/test_515.test
# description: Issue 515
# group: [rigger]

;
PRAGMA enable_verification

# Query with a negative shift predicate yields an incorrect result
;
CREATE TABLE t0(c0 INT);

;
CREATE TABLE t1(c0 INT8, c1 DOUBLE);

;
INSERT INTO t1(c0) VALUES (0);

;
INSERT INTO t1(c1, c0) VALUES (1, 1);

;
INSERT INTO t0 VALUES (0);

;
SELECT * FROM t1 JOIN t0 ON t1.c1 WHERE NOT (t1.c0<<-1);
;
1	1.000000	0

;
SELECT * FROM t1 JOIN t0 ON t1.c1 WHERE (t1.c0<<-1);
;

;
SELECT NOT (t1.c0<<-1) FROM t1;
;
1
1

