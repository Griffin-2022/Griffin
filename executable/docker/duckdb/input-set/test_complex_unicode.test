# name: test/sql/function/string/test_complex_unicode.test
# description: Test correct behavior of various string functions under complex unicode characters
# group: [string]

;
PRAGMA enable_verification

# length with grapheme clusters
;
SELECT length('SÌˆa')
;
2

;
SELECT length('ğŸ¤¦ğŸ¼â€â™‚ï¸')
;
1

;
SELECT length('ğŸ¤¦ğŸ¼â€â™‚ï¸ LğŸ¤¦ğŸ¼â€â™‚ï¸R ğŸ¤¦ğŸ¼â€â™‚ï¸')
;
7

# strlen returns size in bytes
;
SELECT strlen('ğŸ¤¦ğŸ¼â€â™‚ï¸')
;
17

;
SELECT strlen('SÌˆa')
;
4

# reverse with grapheme clusters
;
SELECT REVERSE('SÌˆaï¸')
;
aï¸SÌˆ

;
SELECT REVERSE('ZÍ‘Í«Ì“ÍªÌ‚Í«Ì½ÍÌ´Ì™Ì¤ÌÍ‰ÍšÌ¯ÌÌ ÍAÌ´ÌµÌœÌ°Í”Í«Í—Í¢')
;
AÌ´ÌµÌœÌ°Í”Í«Í—Í¢ZÍ‘Í«Ì“ÍªÌ‚Í«Ì½ÍÌ´Ì™Ì¤ÌÍ‰ÍšÌ¯ÌÌ Í

;
SELECT REVERSE('ğŸ¤¦ğŸ¼â€â™‚ï¸')
;
ğŸ¤¦ğŸ¼â€â™‚ï¸

;
SELECT REVERSE('ğŸ¤¦ğŸ¼â€â™‚ï¸ LğŸ¤¦ğŸ¼â€â™‚ï¸R ğŸ¤¦ğŸ¼â€â™‚ï¸')
;
ğŸ¤¦ğŸ¼â€â™‚ï¸ RğŸ¤¦ğŸ¼â€â™‚ï¸L ğŸ¤¦ğŸ¼â€â™‚ï¸

;
SELECT REVERSE('MotÃ¶rHead')
;
daeHrÃ¶toM

# substring with grapheme clusters
;
SELECT substring('ğŸ¤¦ğŸ¼â€â™‚ï¸ğŸ¤¦ğŸ¼â€â™‚ï¸ğŸ¤¦ğŸ¼â€â™‚ï¸', 1, 1)
;
ğŸ¤¦ğŸ¼â€â™‚ï¸

;
SELECT substring('SÌˆaï¸', 2, 1)
;
aï¸

;
SELECT substring('test: ğŸ¤¦ğŸ¼â€â™‚ï¸helloğŸ¤¦ğŸ¼â€â™‚ï¸ world', 7, 7)
;
ğŸ¤¦ğŸ¼â€â™‚ï¸helloğŸ¤¦ğŸ¼â€â™‚ï¸

;
SELECT substring('SÌˆa', 1, 1)
;
SÌˆ

;
SELECT substring('SÌˆaï¸', -1, 1)
;
aï¸
