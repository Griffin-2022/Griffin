# name: test/issues/rigger/division_by_zero_null.test
# description: SQLancer bug that detected an error in casting of the result of a sum to double
# group: [rigger]

;
PRAGMA enable_verification

;
BEGIN TRANSACTION;

;
CREATE TABLE t0(c0 DOUBLE, c1 DOUBLE);;

;
INSERT INTO t0 VALUES(0.0,0.0);

;
INSERT INTO t0 VALUES(0.0,NULL);

;
COMMIT;

;
SELECT t0.c1, (1/t0.c1) IS NULL FROM t0;
;
0.0	1
NULL	1

;
SELECT t0.c1 FROM t0 WHERE (((1/(t0.c1))) IS NULL);
;
0.0
NULL

;
BEGIN TRANSACTION;

;
CREATE TABLE t1(c0 DOUBLE);

;
INSERT INTO t1 VALUES(10000.0);

;
INSERT INTO t1 VALUES(0.0);

;
COMMIT;

;
SELECT c0, exp(c0) IS NULL FROM t1;
;
10000.0	false
0.0	false

;
SELECT c0, exp(c0) FROM t1;
;
10000.0	inf
0.0	1

;
SELECT c0 FROM t1 WHERE exp(c0) IS NULL;
;

