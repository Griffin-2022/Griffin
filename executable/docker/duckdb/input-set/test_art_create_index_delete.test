# name: test/sql/index/art/test_art_create_index_delete.test
# description: ART Create index with deletes
# group: [art]

;
CREATE TABLE integers(i INTEGER)

;
INSERT INTO integers SELECT * FROM range(10)

;
BEGIN

;
DELETE FROM integers WHERE i=2 OR i=7

;
SELECT * FROM integers WHERE i=1;
;
1

;
SELECT * FROM integers WHERE i=2;
;
2

;
CREATE INDEX i_index ON integers(i)

;
SELECT * FROM integers WHERE i=1;
;
1

;
SELECT * FROM integers WHERE i=2;
;

# con1 still sees the old state
;
SELECT * FROM integers WHERE i=1;
;
1

;
SELECT * FROM integers WHERE i=2;
;
2
