# name: test/sql/alter/rename_col/test_rename_col_transactions.test
# description: Test ALTER TABLE RENAME COLUMN with transactions
# group: [rename_col]

# CREATE TABLE
;
CREATE TABLE test(i INTEGER, j INTEGER)

# start two transactions
;
START TRANSACTION

;
START TRANSACTION

# rename column in first transaction
;
ALTER TABLE test RENAME COLUMN i TO k

# first transaction should see the new name
;
SELECT i FROM test

;
SELECT k FROM test

# second transaction should still consider old name
;
SELECT i FROM test

;
SELECT k FROM test

# now commit
;
COMMIT

# second transaction should still see old name
;
SELECT i FROM test

;
SELECT k FROM test

# now rollback the second transasction
# it should now see the new name
;
COMMIT

;
SELECT i FROM test

;
SELECT k FROM test

