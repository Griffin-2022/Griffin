# name: test/sql/transactions/test_stacked_schema_change.test
# description: Stacked schema changes
# group: [transactions]

;
CREATE TABLE a(i INTEGER)

;
INSERT INTO a VALUES (44)

;
SELECT i FROM a
;
44

;
BEGIN TRANSACTION

;
DROP TABLE a

;
CREATE TABLE a(i INTEGER)

;
INSERT INTO a VALUES (45)

;
SELECT i FROM a
;
45

;
ROLLBACK

;
SELECT i FROM a
;
44

;
BEGIN TRANSACTION

;
DROP TABLE a

;
CREATE TABLE a(i INTEGER)

;
INSERT INTO a VALUES (46)

;
SELECT i FROM a
;
46

;
COMMIT

;
SELECT i FROM a
;
46

