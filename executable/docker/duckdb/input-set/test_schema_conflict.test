# name: test/sql/catalog/test_schema_conflict.test
# description: Catalog conflicts with schemas
# group: [catalog]

;
BEGIN TRANSACTION;

;
BEGIN TRANSACTION;

# create the same schema in both connections
;
CREATE SCHEMA test;

# this should cause a conflict
;
CREATE SCHEMA test;

;
COMMIT

;
ROLLBACK

# now try the same with DROP SCHEMA
;
BEGIN TRANSACTION;

;
BEGIN TRANSACTION;

;
DROP SCHEMA test;

# this should cause a conflict
;
DROP SCHEMA test;

# rollback the drop
;
ROLLBACK

;
ROLLBACK

# now the schema should still exist, so we can drop it again
;
DROP SCHEMA test;

