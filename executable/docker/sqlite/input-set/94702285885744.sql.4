CREATE TABLE t1(x);
;INSERT INTO t1 VALUES(1);
;
;CREATE TABLE t2(x, y, z);
;CREATE INDEX t2xy ON t2(x, y);
;WITH s(i) AS (
    SELECT 1 UNION ALL SELECT i+1 FROM s WHERE i<50000
  )
  INSERT INTO t2 SELECT i/10, i, NULL FROM s;
;ANALYZE;
;SELECT tbl,idx,stat FROM 'main'.sqlite_stat1
;SELECT tbl,idx,stat FROM 'main'.sqlite_stat1
;
;EXPLAIN QUERY PLAN 
  SELECT * FROM t1 LEFT JOIN t2 ON (
    t2.x = t1.x AND (t2.y=? OR (t2.y=? AND t2.z IS NOT NULL))
  );
;
;CREATE TABLE t3(x);
;CREATE TABLE t4(x, y, z);
;CREATE INDEX t4xy ON t4(x, y);
;CREATE INDEX t4xz ON t4(x, z);
;WITH s(i) AS ( SELECT 1 UNION ALL SELECT i+1 FROM s WHERE i<50000)
  INSERT INTO t4 SELECT i/10, i, i FROM s;
;ANALYZE;
;SELECT tbl,idx,stat FROM 'main'.sqlite_stat1
;SELECT tbl,idx,stat FROM 'main'.sqlite_stat1
;
;EXPLAIN QUERY PLAN 
  SELECT * FROM t3 LEFT JOIN t4 ON (t4.x = t3.x) WHERE (t4.y = ? OR t4.z = ?);
;
;