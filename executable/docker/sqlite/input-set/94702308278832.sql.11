PRAGMA integrity_check
;CREATE TABLE t1(a,b);
;CREATE INDEX t1a ON t1(a);
;INSERT INTO t1 VALUES(1,1),(2,2),(3,3),(2,4),(NULL,5),(NULL,6);
;PRAGMA writable_schema=ON;
;UPDATE sqlite_master SET sql='CREATE UNIQUE INDEX t1a ON t1(a)'
        WHERE name='t1a';
;UPDATE sqlite_master SET sql='CREATE TABLE t1(a NOT NULL,b)'
        WHERE name='t1';
;PRAGMA writable_schema=OFF;
;ALTER TABLE t1 RENAME TO t1x;
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;PRAGMA integrity_check;
;
;PRAGMA integrity_check(3);
;
;PRAGMA integrity_check(2);
;
;PRAGMA integrity_check(1);
;
;