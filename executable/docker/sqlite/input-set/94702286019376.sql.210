PRAGMA foreign_keys = on;
;CREATE TABLE p1(a PRIMARY KEY, b) WITHOUT ROWID;
;CREATE TABLE c1(x REFERENCES p1 DEFERRABLE INITIALLY DEFERRED);
;INSERT INTO p1 VALUES(1, 'one');
;INSERT INTO p1 VALUES(2, 'two');
;INSERT INTO c1 VALUES(1);
;INSERT INTO c1 VALUES(2);
;
;BEGIN;
;DELETE FROM p1 WHERE a=1;
;INSERT OR REPLACE INTO p1 VALUES(2, 'two');
;COMMIT;
;