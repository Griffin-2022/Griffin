CREATE TABLE x1(i INTEGER, t TEXT UNIQUE);
;CREATE TRIGGER tr1 AFTER INSERT ON x1 BEGIN
    SELECT * FROM nosuchtable;
  END;
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;DROP TRIGGER tr1;
;CREATE INDEX x1i ON x1(i);
;SELECT sql FROM sqlite_master WHERE name='x1i';
;
;PRAGMA writable_schema = 1;
;UPDATE sqlite_master SET sql = 'CREATE INDEX x1i ON x1(j)' WHERE name='x1i';
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;UPDATE sqlite_master SET sql = '' WHERE name='x1i';
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;DELETE FROM sqlite_master WHERE name = 'x1i';
;
;CREATE TABLE data(x UNIQUE, y, z);
;
;DROP TRIGGER IF EXISTS tr1;
;CREATE TRIGGER tr1 AFTER INSERT ON x1 BEGIN
      UPDATE data SET x=x+1 WHERE zzz=new.i;
    END;
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;CREATE TRIGGER tr1 AFTER INSERT ON x1 BEGIN
      INSERT INTO data(x, y) VALUES(new.i, new.t, 1) 
        ON CONFLICT (x) DO UPDATE SET z=zz+1;
    END;
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;CREATE TRIGGER tr1 AFTER INSERT ON x1 BEGIN
      INSERT INTO x1(i, t) VALUES(new.i+1, new.t||'1') 
        ON CONFLICT (tttttt) DO UPDATE SET t=i+1;
    END;
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;CREATE TRIGGER tr1 AFTER INSERT ON x1 BEGIN
      INSERT INTO nosuchtable VALUES(new.i, new.t);
    END;
;
;ALTER TABLE x1 RENAME COLUMN t TO ttt;
;CREATE TABLE ddd(sql, type, object, db, tbl, icol, znew, bquote);
;INSERT INTO ddd VALUES(
      'CREATE TABLE x1(i INTEGER, t TEXT)',
      'table', 'x1', 'main', 'x1', -1, 'zzz', 0
  ), (
      'CREATE TABLE x1(i INTEGER, t TEXT)',
      'table', 'x1', 'main', 'x1', 2, 'zzz', 0
  ), (
      'CREATE TABLE x1(i INTEGER, t TEXT)',
      'table', 'x1', 'main', 'notable', 0, 'zzz', 0
  ), (
      'CREATE TABLE x1(i INTEGER, t TEXT)',
      'table', 'x1', 'main', 'ddd', -1, 'zzz', 0
  );
;
;SELECT 
  sqlite_rename_column(sql, type, object, db, tbl, icol, znew, bquote, 0)
  FROM ddd;
;
;SELECT sqlite_rename_column(0,0,0,0,0,0,0,0,0);
;