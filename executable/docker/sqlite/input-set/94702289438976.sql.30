CREATE TEMP TABLE t1(x UNIQUE);
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;INSERT INTO t1 VALUES(1);
;CREATE TABLE t2(x, y);
;INSERT INTO t2 VALUES(1, 2);
;CREATE TEMP TABLE t3(w, z);
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;
;BEGIN IMMEDIATE;
;CREATE TABLE xyzzy(abc);
;SELECT x, force_rollback(), EXISTS(SELECT 1 FROM t3 WHERE w=x) FROM t2;
;INSERT OR ROLLBACK INTO t1 VALUES(1)
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;DROP TABLE IF EXISTS t1;
;DROP TABLE IF EXISTS t2;
;DROP TABLE IF EXISTS t3;
;CREATE TEMP TABLE t1(x UNIQUE);
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;INSERT INTO t1 VALUES(1);
;CREATE TABLE t2(x, y);
;INSERT INTO t2 VALUES(1, 2);
;
;BEGIN IMMEDIATE;
;CREATE TEMP TABLE t3(w, z);
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;
;SELECT x, force_rollback(), EXISTS(SELECT 1 FROM t3 WHERE w=x) FROM t2
  
;INSERT OR ROLLBACK INTO t1 VALUES(1)
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;DROP TABLE IF EXISTS t1;
;DROP TABLE IF EXISTS t2;
;DROP TABLE IF EXISTS t3;
;CREATE TEMP TABLE t1(x);
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"temp".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t2(x);
;CREATE TABLE t3(x);
;INSERT INTO t1 VALUES(1);
;INSERT INTO t1 VALUES(2);
;INSERT INTO t2 VALUES(1);
;INSERT INTO t2 VALUES(2);
;
;SELECT ins() AS x FROM t2 UNION ALL SELECT ins() AS x FROM t1
  
;INSERT INTO t3 VALUES('hello')
;SELECT * FROM t3 
;