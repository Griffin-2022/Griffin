ATTACH 'test.db2' AS aux;
;SELECT*FROM"aux".sqlite_master ORDER BY rowid
;SELECT*FROM"aux".sqlite_master ORDER BY rowid
;PRAGMA aux.journal_mode = wal;
;CREATE TABLE aux.t2(x, y);
;SELECT*FROM"aux".sqlite_master WHERE tbl_name='t2' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"aux".sqlite_master WHERE tbl_name='t2' AND type!='trigger' ORDER BY rowid
;INSERT INTO aux.t2 VALUES('a', 'b');
;PRAGMA schema_version = 450;
;DETACH aux;
;PRAGMA main.journal_mode = wal;
;CREATE TABLE t1(a, b);
;INSERT INTO t1 VALUES(1, 2);
;INSERT INTO t1 VALUES(3, 4);
;SELECT * FROM t1;
;
;SELECT * FROM t1 
;SELECT * FROM t2 
;SELECT * FROM t1 
;PRAGMA wal_checkpoint 
;SELECT * FROM t2 
;SELECT * FROM t1 
;PRAGMA journal_mode = delete;
;PRAGMA page_size = 512;
;VACUUM;
;ATTACH '' AS vacuum_db
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;BEGIN
;SELECT sql FROM "main".sqlite_schema WHERE type='table'AND name<>'sqlite_sequence' AND coalesce(rootpage,1)>0
;CREATE TABLE t1(a, b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT sql FROM "main".sqlite_schema WHERE type='index'
;SELECT'INSERT INTO vacuum_db.'||quote(name)||' SELECT*FROM"main".'||quote(name)FROM vacuum_db.sqlite_schema WHERE type='table'AND coalesce(rootpage,1)>0
;INSERT INTO vacuum_db.'t1' SELECT*FROM"main".'t1'
;INSERT INTO vacuum_db.sqlite_schema SELECT*FROM "main".sqlite_schema WHERE type IN('view','trigger') OR(type='table'AND rootpage=0)
;PRAGMA journal_mode = wal;
;INSERT INTO t1 VALUES(5, 6);
;
;SELECT * FROM t1 
;SELECT * FROM t2 
;SELECT * FROM t1 
;