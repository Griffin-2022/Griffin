CREATE TABLE t1(
     a INT,
     b TEXT,
     c ANY,
     w INT GENERATED ALWAYS AS (a*10),
     x TEXT AS (typeof(c)),
     y TEXT AS (substr(b,a,a+2))
   );
;
;INSERT INTO t1(a,b,c) VALUES(1,'abcdef',5.5),(3,'cantaloupe',NULL);
;SELECT w, x, y, '|' FROM t1 ORDER BY a;
;
;SELECT w, x, y, '|' FROM t1 ORDER BY w;
;
;SELECT a FROM t1 WHERE w=30;
;
;SELECT a FROM t1 WHERE x='real';
;
;SELECT a FROM t1 WHERE y LIKE '%tal%' OR x='real' ORDER BY b;
;
;CREATE INDEX t1w ON t1(w);
;SELECT a FROM t1 WHERE w=10;
;
;CREATE INDEX t1x ON t1(x) WHERE w BETWEEN 20 AND 40;
;SELECT a FROM t1 WHERE x='null' AND w BETWEEN 20 AND 40;
;
;SELECT a FROM t1 WHERE x='real';
;
;VACUUM;
;ATTACH '' AS vacuum_db
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;BEGIN
;SELECT sql FROM "main".sqlite_schema WHERE type='table'AND name<>'sqlite_sequence' AND coalesce(rootpage,1)>0
;CREATE TABLE t1(
     a INT,
     b TEXT,
     c ANY,
     w INT GENERATED ALWAYS AS (a*10),
     x TEXT AS (typeof(c)),
     y TEXT AS (substr(b,a,a+2))
   )
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT sql FROM "main".sqlite_schema WHERE type='index'
;CREATE INDEX t1w ON t1(w)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='t1w' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='t1w' AND type='index' ORDER BY rowid
;CREATE INDEX t1x ON t1(x) WHERE w BETWEEN 20 AND 40
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='t1x' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='t1x' AND type='index' ORDER BY rowid
;SELECT'INSERT INTO vacuum_db.'||quote(name)||' SELECT*FROM"main".'||quote(name)FROM vacuum_db.sqlite_schema WHERE type='table'AND coalesce(rootpage,1)>0
;INSERT INTO vacuum_db.'t1' SELECT*FROM"main".'t1'
;INSERT INTO vacuum_db.sqlite_schema SELECT*FROM "main".sqlite_schema WHERE type IN('view','trigger') OR(type='table'AND rootpage=0)
;PRAGMA integrity_check;
;
;UPDATE t1 SET a=a+100 WHERE w<20;
;SELECT a, w, '|' FROM t1 ORDER BY w;
;
;INSERT INTO t1 VALUES(4,'jambalaya','Chef John'),(15,87719874135,0);
;SELECT w, x, y, '|' FROM t1 ORDER BY w;
;
;