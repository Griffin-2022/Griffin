PRAGMA legacy_alter_table = 1;
;CREATE TABLE t1(a, b, c);
;CREATE VIEW v1 AS SELECT * FROM t2;
;
;ALTER TABLE t1 RENAME TO t3;
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;
;ALTER TABLE t3 RENAME TO t1;
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;
;DROP VIEW v1;
;CREATE TRIGGER tr AFTER INSERT ON t1 BEGIN
    INSERT INTO t2 VALUES(new.a);
  END;
;
;ALTER TABLE t1 RENAME TO t3;
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;
;ALTER TABLE t3 RENAME TO t1;
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;DROP TRIGGER tr;
;ATTACH 'test.db2' AS aux;
;SELECT*FROM"aux".sqlite_master ORDER BY rowid
;SELECT*FROM"aux".sqlite_master ORDER BY rowid
;CREATE TRIGGER tr AFTER INSERT ON t1 WHEN new.a IS NULL BEGIN SELECT 1, 2, 3; END;
;CREATE TABLE aux.t1(x);
;SELECT*FROM"aux".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"aux".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;CREATE TEMP TRIGGER tr AFTER INSERT ON aux.t1 BEGIN SELECT 1, 2, 3; END;
;SELECT*FROM"temp".sqlite_master WHERE type='trigger' AND name='tr' ORDER BY rowid
;SELECT*FROM"temp".sqlite_master WHERE type='trigger' AND name='tr' ORDER BY rowid
;
;ALTER TABLE main.t1 RENAME TO t3;
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;
;SELECT sql FROM sqlite_temp_master;
;SELECT sql FROM sqlite_master WHERE type='trigger';
;
;