PRAGMA cache_size=10;
;BEGIN;
;CREATE TABLE t3(x TEXT);
;INSERT INTO t3 VALUES(randstr(10,400));
;INSERT INTO t3 SELECT randstr(10,400) FROM t3;
;COMMIT;
;SELECT count(*) FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;BEGIN
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT one
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SELECT count(*), md5sum(x) FROM t3
;SAVEPOINT two
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;ROLLBACK to two
;SELECT count(*), md5sum(x) FROM t3
;PRAGMA integrity_check
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;
;SAVEPOINT three
;UPDATE t3 SET x = randstr(10, 400) WHERE random()%10;
;INSERT INTO t3 SELECT x FROM t3 WHERE random()%10;
;DELETE FROM t3 WHERE random()%10;
;
;RELEASE three
;ROLLBACK to one
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE (random()%10 == 0);
;
;COMMIT
;PRAGMA integrity_check
;