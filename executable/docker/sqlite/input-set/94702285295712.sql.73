pragma locking_mode;
;pragma main.locking_mode;
;pragma temp.locking_mode;
;
;pragma locking_mode = exclusive;
;
;pragma locking_mode;
;pragma main.locking_mode;
;pragma temp.locking_mode;
;
;pragma locking_mode = normal;
;
;pragma locking_mode;
;pragma main.locking_mode;
;pragma temp.locking_mode;
;
;pragma locking_mode = invalid;
;
;pragma locking_mode;
;pragma main.locking_mode;
;pragma temp.locking_mode;
;
;pragma locking_mode = exclusive;
;ATTACH 'test2.db' as aux;
;SELECT*FROM"aux".sqlite_master ORDER BY rowid
;SELECT*FROM"aux".sqlite_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;
;pragma main.locking_mode;
;pragma aux.locking_mode;
;
;pragma main.locking_mode = normal;
;
;pragma temp.locking_mode;
;pragma aux.locking_mode;
;
;pragma locking_mode;
;
;ATTACH 'test3.db' as aux2;
;SELECT*FROM"aux2".sqlite_master ORDER BY rowid
;SELECT*FROM"aux2".sqlite_master ORDER BY rowid
;
;pragma main.locking_mode;
;pragma aux.locking_mode;
;pragma aux2.locking_mode;
;
;pragma aux.locking_mode = normal;
;
;pragma main.locking_mode;
;pragma aux.locking_mode;
;pragma aux2.locking_mode;
;
;pragma locking_mode = normal;
;
;pragma main.locking_mode;
;pragma temp.locking_mode;
;pragma aux.locking_mode;
;pragma aux2.locking_mode;
;
;ATTACH 'test4.db' as aux3;
;SELECT*FROM"aux3".sqlite_master ORDER BY rowid
;SELECT*FROM"aux3".sqlite_master ORDER BY rowid
;
;pragma main.locking_mode;
;pragma temp.locking_mode;
;pragma aux.locking_mode;
;pragma aux2.locking_mode;
;pragma aux3.locking_mode;
;
;DETACH aux;
;DETACH aux2;
;DETACH aux3;
;
;CREATE TABLE abc(a, b, c);
;INSERT INTO abc VALUES(1, 2, 3);
;PRAGMA locking_mode = exclusive;
;
;SELECT * FROM abc;
;
;INSERT INTO abc VALUES(7, 8, 9);
;
;PRAGMA locking_mode = normal;
;
;
;PRAGMA locking_mode = exclusive;
;BEGIN;
;DELETE FROM abc;
;
;COMMIT;
;
;INSERT INTO abc VALUES('A', 'B', 'C');
;SELECT * FROM abc;
;
;BEGIN;
;UPDATE abc SET a = 1, b = 2, c = 3;
;ROLLBACK;
;SELECT * FROM abc;
;
;PRAGMA locking_mode = normal;
;
;PRAGMA locking_mode = exclusive;
;
;PRAGMA default_cache_size = 10;
;
;BEGIN;
;CREATE TABLE t3(x TEXT);
;INSERT INTO t3 VALUES(randstr(10,400));
;INSERT INTO t3 SELECT randstr(10,400) FROM t3;
;COMMIT;
;
;SELECT count(*) FROM t3;
;SELECT count(*), md5sum(x) FROM t3
;BEGIN;
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;SELECT count(*) FROM t3;
;ROLLBACK;
;
;SELECT count(*), md5sum(x) FROM t3
;BEGIN;
;DELETE FROM t3 WHERE random()%10!=0;
;INSERT INTO t3 SELECT randstr(10,10)||x FROM t3;
;ROLLBACK;
;
;SELECT count(*), md5sum(x) FROM t3
;INSERT INTO t3 SELECT randstr(10,400) FROM t3 WHERE random()%10==0;
;
;PRAGMA locking_mode = NORMAL;
;DROP TABLE t3;
;DROP TABLE abc;
;
;