CREATE VIRTUAL TABLE demo USING spellfix1;
;CREATE TABLE IF NOT EXISTS "main"."demo_vocab"(
  id INTEGER PRIMARY KEY,
  rank INT,
  langid INT,
  word TEXT,
  k1 TEXT,
  k2 TEXT
);

;CREATE TABLE IF NOT EXISTS "main"."demo_vocab"(
  id INTEGER PRIMARY KEY,
  rank INT,
  langid INT,
  word TEXT,
  k1 TEXT,
  k2 TEXT
);
;CREATE INDEX IF NOT EXISTS "main"."demo_vocab_index_langid_k2" ON "demo_vocab"(langid,k2);
;CREATE INDEX IF NOT EXISTS "main"."demo_vocab_index_langid_k2" ON "demo_vocab"(langid,k2);
;INSERT INTO demo(word) VALUES ('amsterdam');
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdam',nullif('amsterdam','amsterdam'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdam',nullif('amsterdam','amsterdam'),'AMCDRDAM')
;INSERT INTO demo(word) VALUES ('amsterdammetje');
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdammetje',nullif('amsterdammetje','amsterdammetje'),'AMCDRDAMADCA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdammetje',nullif('amsterdammetje','amsterdammetje'),'AMCDRDAMADCA')
;INSERT INTO demo(word) VALUES ('amsterdamania');
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamania',nullif('amsterdamania','amsterdamania'),'AMCDRDAMAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamania',nullif('amsterdamania','amsterdamania'),'AMCDRDAMAMA')
;INSERT INTO demo(word) VALUES ('amsterdamweg');
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamweg',nullif('amsterdamweg','amsterdamweg'),'AMCDRDAMBAC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamweg',nullif('amsterdamweg','amsterdamweg'),'AMCDRDAMBAC')
;INSERT INTO demo(word) VALUES ('amsterdamsestraat');
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamsestraat',nullif('amsterdamsestraat','amsterdamsestraat'),'AMCDRDAMCACDRD')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamsestraat',nullif('amsterdamsestraat','amsterdamsestraat'),'AMCDRDAMCACDRD')
;INSERT INTO demo(word) VALUES ('amsterdamlaan');
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamlaan',nullif('amsterdamlaan','amsterdamlaan'),'AMCDRDAMLM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamlaan',nullif('amsterdamlaan','amsterdamlaan'),'AMCDRDAMLM')
;
;SELECT word, distance, matchlen FROM demo 
  WHERE word MATCH 'amstedam*' AND top=3
  ORDER BY +word;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;
;SELECT word, distance, matchlen FROM demo WHERE 
  word MATCH 'amstedam*' AND top=3 AND distance <= 100
  ORDER BY +word;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;
;SELECT word, distance, matchlen FROM demo WHERE 
  word MATCH 'amstedam*' AND distance <= 100
  ORDER BY +word;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;
;INSERT INTO demo(word) VALUES ('amsterdam' || $l) 
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdama',nullif('amsterdama','amsterdama'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdama',nullif('amsterdama','amsterdama'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamb',nullif('amsterdamb','amsterdamb'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamb',nullif('amsterdamb','amsterdamb'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamc',nullif('amsterdamc','amsterdamc'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamc',nullif('amsterdamc','amsterdamc'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamd',nullif('amsterdamd','amsterdamd'),'AMCDRDAMD')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamd',nullif('amsterdamd','amsterdamd'),'AMCDRDAMD')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdame',nullif('amsterdame','amsterdame'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdame',nullif('amsterdame','amsterdame'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamf',nullif('amsterdamf','amsterdamf'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamf',nullif('amsterdamf','amsterdamf'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamg',nullif('amsterdamg','amsterdamg'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamg',nullif('amsterdamg','amsterdamg'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamh',nullif('amsterdamh','amsterdamh'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamh',nullif('amsterdamh','amsterdamh'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdami',nullif('amsterdami','amsterdami'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdami',nullif('amsterdami','amsterdami'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamj',nullif('amsterdamj','amsterdamj'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamj',nullif('amsterdamj','amsterdamj'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamk',nullif('amsterdamk','amsterdamk'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamk',nullif('amsterdamk','amsterdamk'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdaml',nullif('amsterdaml','amsterdaml'),'AMCDRDAML')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdaml',nullif('amsterdaml','amsterdaml'),'AMCDRDAML')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamm',nullif('amsterdamm','amsterdamm'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamm',nullif('amsterdamm','amsterdamm'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamn',nullif('amsterdamn','amsterdamn'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamn',nullif('amsterdamn','amsterdamn'),'AMCDRDAM')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamo',nullif('amsterdamo','amsterdamo'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamo',nullif('amsterdamo','amsterdamo'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamp',nullif('amsterdamp','amsterdamp'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamp',nullif('amsterdamp','amsterdamp'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamq',nullif('amsterdamq','amsterdamq'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamq',nullif('amsterdamq','amsterdamq'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamr',nullif('amsterdamr','amsterdamr'),'AMCDRDAMR')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamr',nullif('amsterdamr','amsterdamr'),'AMCDRDAMR')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdams',nullif('amsterdams','amsterdams'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdams',nullif('amsterdams','amsterdams'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamt',nullif('amsterdamt','amsterdamt'),'AMCDRDAMD')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamt',nullif('amsterdamt','amsterdamt'),'AMCDRDAMD')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamu',nullif('amsterdamu','amsterdamu'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamu',nullif('amsterdamu','amsterdamu'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamv',nullif('amsterdamv','amsterdamv'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamv',nullif('amsterdamv','amsterdamv'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamw',nullif('amsterdamw','amsterdamw'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamw',nullif('amsterdamw','amsterdamw'),'AMCDRDAMB')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamx',nullif('amsterdamx','amsterdamx'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamx',nullif('amsterdamx','amsterdamx'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamy',nullif('amsterdamy','amsterdamy'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamy',nullif('amsterdamy','amsterdamy'),'AMCDRDAMA')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamz',nullif('amsterdamz','amsterdamz'),'AMCDRDAMC')
;INSERT INTO "main"."demo_vocab"(rank,langid,word,k1,k2) VALUES(1,0,'amsterdamz',nullif('amsterdamz','amsterdamz'),'AMCDRDAMC')
;SELECT count(*) FROM demo WHERE word MATCH 'amstedam*' AND distance <= 100;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;SELECT count(*) FROM demo 
  WHERE word MATCH 'amstedam*' AND distance <= 100 AND top=20;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;
;SELECT word, distance, matchlen FROM demo 
  WHERE word MATCH 'amstedam*' AND distance <= 100
  ORDER BY distance, word;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;
;SELECT word, distance, matchlen FROM demo 
  WHERE word MATCH 'amstedam*' AND distance <= 100 AND top=20
  ORDER BY distance, word;
;SELECT id, word, rank, coalesce(k1,word)  FROM "main"."demo_vocab" WHERE langid=0 AND k2>=?1 AND k2<?2
;
;