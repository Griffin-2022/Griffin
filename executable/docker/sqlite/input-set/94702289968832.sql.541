CREATE TABLE t1(a, b, PRIMARY KEY(a)) WITHOUT ROWID;
;CREATE UNIQUE INDEX i1 ON t1(b);
;CREATE TABLE t2(a, b, PRIMARY KEY(a)) WITHOUT ROWID;
;CREATE UNIQUE INDEX i2 ON t2(b);
;INSERT INTO t1 VALUES('one', 'two');
;INSERT INTO t2 VALUES('three', 'two');
;
;INSERT OR REPLACE INTO t1 SELECT * FROM t2;
;SELECT * FROM t1;
;
;DELETE FROM t1;
;INSERT INTO t1 SELECT * FROM t2;
;
;INSERT INTO t2 VALUES('four', 'four');
;INSERT INTO t2 VALUES('six', 'two');
;CREATE TABLE t3(a PRIMARY KEY);
;CREATE TABLE t4(a PRIMARY KEY);
;INSERT INTO t4 VALUES('i');
;INSERT INTO t4 VALUES('ii');
;INSERT INTO t4 VALUES('iii');
;INSERT INTO t3 SELECT * FROM t4;
;SELECT * FROM t3;
;
;CREATE TABLE t41(a PRIMARY KEY) WITHOUT ROWID;
;INSERT INTO t41 VALUES('abc');
;CREATE TABLE t42(x);
;INSERT INTO t42 VALUES('xyz');
;SELECT t42.rowid FROM t41, t42;
;
;SELECT t42.rowid FROM t42, t41;
;
;CREATE TABLE t45(a PRIMARY KEY, b, c) WITHOUT ROWID;
;CREATE INDEX i45 ON t45(b);
;INSERT INTO t45 VALUES(2, 'one', 'x');
;INSERT INTO t45 VALUES(4, 'one', 'x');
;INSERT INTO t45 VALUES(6, 'one', 'x');
;INSERT INTO t45 VALUES(8, 'one', 'x');
;INSERT INTO t45 VALUES(10, 'one', 'x');
;INSERT INTO t45 VALUES(1, 'two', 'x');
;INSERT INTO t45 VALUES(3, 'two', 'x');
;INSERT INTO t45 VALUES(5, 'two', 'x');
;INSERT INTO t45 VALUES(7, 'two', 'x');
;INSERT INTO t45 VALUES(9, 'two', 'x');
;
;EXPLAIN QUERY PLAN 
  SELECT * FROM t45 WHERE b=? AND a>?

;SELECT * FROM t45 WHERE b='two' AND a>4

;SELECT * FROM t45 WHERE b='one' AND a<8

;CREATE TABLE t46(a, b, c, d, PRIMARY KEY(a, b)) WITHOUT ROWID;
;WITH r(x) AS (
    SELECT 1 UNION ALL SELECT x+1 FROM r WHERE x<100
  )
  INSERT INTO t46 SELECT x / 20, x % 20, x % 10, x FROM r;
;
;SELECT count(*) FROM t46 WHERE c = 5 AND a = 1
;SELECT count(*) FROM t46 WHERE c = 4 AND a < 3
;SELECT count(*) FROM t46 WHERE c = 2 AND a >= 3
;SELECT count(*) FROM t46 WHERE c = 2 AND a = 1 AND b<10
;SELECT count(*) FROM t46 WHERE c = 0 AND a = 0 AND b>5
;CREATE INDEX i46 ON t46(c);
;
;SELECT count(*) FROM t46 WHERE c = 5 AND a = 1
;EXPLAIN QUERY PLAN SELECT count(*) FROM t46 WHERE c = 5 AND a = 1
;SELECT count(*) FROM t46 WHERE c = 4 AND a < 3
;EXPLAIN QUERY PLAN SELECT count(*) FROM t46 WHERE c = 4 AND a < 3
;SELECT count(*) FROM t46 WHERE c = 2 AND a >= 3
;EXPLAIN QUERY PLAN SELECT count(*) FROM t46 WHERE c = 2 AND a >= 3
;SELECT count(*) FROM t46 WHERE c = 2 AND a = 1 AND b<10
;EXPLAIN QUERY PLAN SELECT count(*) FROM t46 WHERE c = 2 AND a = 1 AND b<10
;SELECT count(*) FROM t46 WHERE c = 0 AND a = 0 AND b>5
;EXPLAIN QUERY PLAN SELECT count(*) FROM t46 WHERE c = 0 AND a = 0 AND b>5
;CREATE TABLE t47(a, b UNIQUE PRIMARY KEY) WITHOUT ROWID;
;CREATE INDEX i47 ON t47(a);
;INSERT INTO t47 VALUES(1, 2);
;INSERT INTO t47 VALUES(2, 4);
;INSERT INTO t47 VALUES(3, 6);
;INSERT INTO t47 VALUES(4, 8);
;VACUUM;
;ATTACH '' AS vacuum_db
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;BEGIN
;SELECT sql FROM "main".sqlite_schema WHERE type='table'AND name<>'sqlite_sequence' AND coalesce(rootpage,1)>0
;CREATE TABLE t1(a, b, PRIMARY KEY(a)) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t2(a, b, PRIMARY KEY(a)) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t2' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t2' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t3(a PRIMARY KEY)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t4(a PRIMARY KEY)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t4' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t4' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t41(a PRIMARY KEY) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t41' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t41' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t42(x)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t42' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t42' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t45(a PRIMARY KEY, b, c) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t45' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t45' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t46(a, b, c, d, PRIMARY KEY(a, b)) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t46' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t46' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t47(a, b UNIQUE PRIMARY KEY) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t47' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t47' AND type!='trigger' ORDER BY rowid
;SELECT sql FROM "main".sqlite_schema WHERE type='index'
;CREATE UNIQUE INDEX i1 ON t1(b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i1' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i1' AND type='index' ORDER BY rowid
;CREATE UNIQUE INDEX i2 ON t2(b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i2' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i2' AND type='index' ORDER BY rowid
;CREATE INDEX i45 ON t45(b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i45' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i45' AND type='index' ORDER BY rowid
;CREATE INDEX i46 ON t46(c)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i46' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i46' AND type='index' ORDER BY rowid
;CREATE INDEX i47 ON t47(a)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i47' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i47' AND type='index' ORDER BY rowid
;SELECT'INSERT INTO vacuum_db.'||quote(name)||' SELECT*FROM"main".'||quote(name)FROM vacuum_db.sqlite_schema WHERE type='table'AND coalesce(rootpage,1)>0
;INSERT INTO vacuum_db.'t1' SELECT*FROM"main".'t1'
;INSERT INTO vacuum_db.'t2' SELECT*FROM"main".'t2'
;INSERT INTO vacuum_db.'t3' SELECT*FROM"main".'t3'
;INSERT INTO vacuum_db.'t4' SELECT*FROM"main".'t4'
;INSERT INTO vacuum_db.'t41' SELECT*FROM"main".'t41'
;INSERT INTO vacuum_db.'t42' SELECT*FROM"main".'t42'
;INSERT INTO vacuum_db.'t45' SELECT*FROM"main".'t45'
;INSERT INTO vacuum_db.'t46' SELECT*FROM"main".'t46'
;INSERT INTO vacuum_db.'t47' SELECT*FROM"main".'t47'
;INSERT INTO vacuum_db.sqlite_schema SELECT*FROM "main".sqlite_schema WHERE type IN('view','trigger') OR(type='table'AND rootpage=0)
;PRAGMA integrity_check;
;SELECT name FROM sqlite_master WHERE tbl_name = 't47';
;
;CREATE TABLE t48(
    a UNIQUE UNIQUE, 
    b UNIQUE, 
    PRIMARY KEY(a), 
    UNIQUE(a)
  ) WITHOUT ROWID;
;INSERT INTO t48 VALUES('a', 'b'), ('c', 'd'), ('e', 'f');
;VACUUM;
;ATTACH '' AS vacuum_db
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master ORDER BY rowid
;BEGIN
;SELECT sql FROM "main".sqlite_schema WHERE type='table'AND name<>'sqlite_sequence' AND coalesce(rootpage,1)>0
;CREATE TABLE t1(a, b, PRIMARY KEY(a)) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t1' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t2(a, b, PRIMARY KEY(a)) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t2' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t2' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t3(a PRIMARY KEY)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t3' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t4(a PRIMARY KEY)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t4' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t4' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t41(a PRIMARY KEY) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t41' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t41' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t42(x)
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t42' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t42' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t45(a PRIMARY KEY, b, c) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t45' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t45' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t46(a, b, c, d, PRIMARY KEY(a, b)) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t46' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t46' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t47(a, b UNIQUE PRIMARY KEY) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t47' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t47' AND type!='trigger' ORDER BY rowid
;CREATE TABLE t48(
    a UNIQUE UNIQUE, 
    b UNIQUE, 
    PRIMARY KEY(a), 
    UNIQUE(a)
  ) WITHOUT ROWID
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t48' AND type!='trigger' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE tbl_name='t48' AND type!='trigger' ORDER BY rowid
;SELECT sql FROM "main".sqlite_schema WHERE type='index'
;CREATE UNIQUE INDEX i1 ON t1(b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i1' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i1' AND type='index' ORDER BY rowid
;CREATE UNIQUE INDEX i2 ON t2(b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i2' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i2' AND type='index' ORDER BY rowid
;CREATE INDEX i45 ON t45(b)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i45' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i45' AND type='index' ORDER BY rowid
;CREATE INDEX i46 ON t46(c)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i46' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i46' AND type='index' ORDER BY rowid
;CREATE INDEX i47 ON t47(a)
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i47' AND type='index' ORDER BY rowid
;SELECT*FROM"vacuum_db".sqlite_master WHERE name='i47' AND type='index' ORDER BY rowid
;SELECT'INSERT INTO vacuum_db.'||quote(name)||' SELECT*FROM"main".'||quote(name)FROM vacuum_db.sqlite_schema WHERE type='table'AND coalesce(rootpage,1)>0
;INSERT INTO vacuum_db.'t1' SELECT*FROM"main".'t1'
;INSERT INTO vacuum_db.'t2' SELECT*FROM"main".'t2'
;INSERT INTO vacuum_db.'t3' SELECT*FROM"main".'t3'
;INSERT INTO vacuum_db.'t4' SELECT*FROM"main".'t4'
;INSERT INTO vacuum_db.'t41' SELECT*FROM"main".'t41'
;INSERT INTO vacuum_db.'t42' SELECT*FROM"main".'t42'
;INSERT INTO vacuum_db.'t45' SELECT*FROM"main".'t45'
;INSERT INTO vacuum_db.'t46' SELECT*FROM"main".'t46'
;INSERT INTO vacuum_db.'t47' SELECT*FROM"main".'t47'
;INSERT INTO vacuum_db.'t48' SELECT*FROM"main".'t48'
;INSERT INTO vacuum_db.sqlite_schema SELECT*FROM "main".sqlite_schema WHERE type IN('view','trigger') OR(type='table'AND rootpage=0)
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;SELECT*FROM"temp".sqlite_temp_master ORDER BY rowid
;PRAGMA integrity_check;
;SELECT name FROM sqlite_master WHERE tbl_name = 't48';
;
;CREATE TABLE t70a(
     a INT CHECK( rowid!=33 ),
     b TEXT PRIMARY KEY
  );
;INSERT INTO t70a(a,b) VALUES(99,'hello');
;
;INSERT INTO t70a(rowid,a,b) VALUES(33,99,'xyzzy');
;CREATE TABLE t70b(
     a INT CHECK( rowid!=33 ),
     b TEXT PRIMARY KEY
  ) WITHOUT ROWID;
;